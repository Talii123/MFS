var noop=function(){};var console={log:noop,error:noop,trace:noop,profile:noop,warn:noop,dir:noop};var themer=(function(g){var b="/colours.css",d="/jquery-ui-1.9.2.custom.css",c=$("#appCss"),h=$(".coloursCss"),e=$(".jqueryUICss"),i=function(l){var k=document.createElement("script");k.type="text/javascript";k.id="uvScript";k.async=true;k.src=("https:"==document.location.protocol?"https://":"http://")+"widget.uservoice.com/"+l;var j=document.getElementsByTagName("script")[0];j.parentNode.insertBefore(k,j);$("#uvScript").on("load",function(){$(".menu.right").animate({"margin-right":"9em"},1200)})},a=function(n,m){var j=/body\s+\{([^\}]*)\}/,l,p,k;try{k=g[m];if(!k){l=j.exec(n)[1];console.log("bodyRules",l);p=l.split(";");console.log("rules: ",p);$.each(p,function(q,r){var s=r.split(":");if(/background\-color/.test(s[0])){k=s[1];console.log("new background-color is: ",k)}})}$("#uvTab").css({"background-color":k})}catch(o){console.error("Unable to change style for feedback link due to ",o)}},f=function(l){var k=(document.location.protocol!="file:"),n=(k?"/css/":"css/")+l,m=n+b,j=n+d;$(document).data("theme",l);$.when($.get(m),$.get(j)).then(function(p,o,q){if(h.length>0){h.prop("href",m)}else{$("<link />").attr({type:"text/css",rel:"stylesheet","class":"coloursCss",href:m}).insertAfter(c);h=$(".coloursCss")}if(e.length>0){e.prop("href",j)}else{$("<link />").attr({type:"text/css",rel:"stylesheet","class":"jqueryUICss",href:j}).insertBefore(c);e=$(".jqueryUICss")}a(arguments[0],l)})};return{setTheme:f,createFeedbackButton:i}})({"indie-green":"#f533ff"});(function(h){var k=location.search.substring(1),e=k.indexOf("#"),f,b,g,l,d="default",a=d,j,c;if(e>0){k=k.substring(1,e)}f=k.split("&");for(g=0,b=f.length;g<b;++g){l=f[g].split("=");if(l[0]==="theme"){a=l[1];break}}if(a!==d){themer.setTheme(a)}themer.createFeedbackButton(h[a])})({"":"Ks2Ax046vOVTWNFQ1c54A.js","default":"f6Wugo7NpH9OXlj3ALd2w.js",livestrong:"Ks2Ax046vOVTWNFQ1c54A.js","nike-livestrong":"f6Wugo7NpH9OXlj3ALd2w.js",vader2:"BZckBlvLTT17zXLewJ1IwA.js","indie-green":"YyAkCK8pB7PthQxLfarQ.js"});Timeline.CancerEventSource=function(a){var b=new Timeline.DefaultEventSource(a);b.loadJSON=Timeline.CancerEventSource.prototype.loadJSON;return b};Timeline.CancerEventSource.prototype.getIconURLForEventType=function(c){var b=c.type,d;console.log("eventType: ",b);switch(b){case"DIAGNOSIS":d="diagnosis_40_40.jpg";break;case"SURGERY":d="surgery_40_40.jpg";break;case"CHEMO":d="chemo_40_40.jpg";break;case"RADIATION":d="radiation_40_40.jpg";break;case"IMMUNO":d="immuno_40_40.jpg";break;case"TEST":var a=(c.typeDetails!=null)?c.typeDetails.testType:"default";switch(a){case"CT_SCAN":d="ctscan_40_40.jpg";break;case"MRI":d="mri_40_40.jpg";break;case"ULTRASOUND":d="ultrasound_40_40.jpg";break;default:console.log("Unknown test type: ",a);break}break;default:d="";break}console.log("iconURL: ",d);return d};Timeline.CancerEventSource.prototype.loadJSON=function(m,c){var e=this._getBaseURL(c),b=[];var f;var g;if(m&&m.events){var n=("wikiURL" in m)?m.wikiURL:null;var q=("wikiSection" in m)?m.wikiSection:null;var j=("dateTimeFormat" in m)?m.dateTimeFormat:null;var l=this._events.getUnit().getParser(j);for(var k=0;k<m.events.length;k++){var a=m.events[k];var d=a.isDuration||(a.durationEvent!=null&&!a.durationEvent);var o=this._resolveRelativeURL(a.icon,e);console.log("oldIcon: ",o);var h="/images/"+Timeline.CancerEventSource.prototype.getIconURLForEventType(a);console.log("newIcon: ",h);var p=new Timeline.DefaultEventSource.Event({id:("id" in a)?a.id:undefined,start:l(a.start),end:l(a.end),latestStart:l(a.latestStart),earliestEnd:l(a.earliestEnd),instant:d,text:a.title,description:a.description,image:this._resolveRelativeURL(a.image,e),link:this._resolveRelativeURL(a.link,e),icon:h,color:a.color,textColor:a.textColor,hoverText:a.hoverText,classname:a.classname,tapeImage:a.tapeImage,tapeRepeat:a.tapeRepeat,caption:a.caption,eventID:a.eventID,trackNum:a.trackNum});p._obj=a;p.getProperty=function(i){return this._obj[i]};p.setWikiInfo(n,q);this._events.add(p);b.push(p)}}if(b.length>0){console.log("firing the 'onAddMany' event with: ",b);this._fire("onAddMany",[b])}};function Sandbox(){var b=Array.prototype.slice.call(arguments),f=b.pop(),a=(b[0]&&typeof b[0]==="string")?b:b[0],c;if(!(this instanceof Sandbox)){return new Sandbox(a,f)}if(!a||(a[0]&&a[0]==="*")){a=[];for(c in Sandbox.modules){if(Sandbox.modules.hasOwnProperty(c)){a.push(c)}}}for(c=0;c<a.length;++c){try{Sandbox.modules[a[c]](this)}catch(d){console.log("modules[i]=",a[c]);console.log(d)}}f(this)}Sandbox.prototype={name:"My Application",version:"1.0",getName:function(){return this.name}};var errorMsg="Sandbox is not defined.  Timeline module will not be loaded.";if(!Sandbox){console.error(errorMsg);throw {name:"NoSandboxError",message:errorMsg}}if(!Sandbox.modules){Sandbox.modules={}}Sandbox.modules.common=function(e){var d=function d(g,h){$(".email",this).remove()},f=function f(){return"<div class='email'><a href='mailto:TallFry@facebook.com'>TallFry@facebook.com</a></div>"};$.prefetchCachedScript=function(h,g){g=$.extend(g||{},{dataType:"text",cache:true,url:h});return jQuery.ajax(g)};e.initThemer=function b(){var h=$(document).data("theme"),i=$("#themeSelector"),g=$("option[value='"+h+"']",i).index(),g=g>=0?g:0;i.prop("selectedIndex",g).change(function(j){themer.setTheme(this.options[this.selectedIndex].value)})};e.getEmailHTML=f;e.removeEmail=d;e.clipText=function(h,g){console.log("\n\n\n\n\nvalue: ",h,"\n\n\n\n\n");return(h.length>g)?h=h.substring(0,g)+"...":h};e.createCounter=function a(){var g=0;return{nextInt:function(){return ++g},init:function(h){if(typeof h==="number"&&h>0){g=h}}}};e.setupDialogs=function c(g){$(".dialog").dialog(g);$("#designedByDialog").bind("dialogbeforeclose",d);$("#designedByDialog").dialog({open:function(){$("#designedByDialog").append($(f()).prepend("email: "))}});$(".menu").click(function(h){var i=h.target.id;$("#"+i+"Dialog").dialog("open")})};e.getResizer=function(g){var h=null;return function(){console.log("onResize()");if(h==null){h=window.setTimeout(function(){h=null;g.layout()},500)}}};e.doPreFetch=function(h){var g,j,k;g=h.length;for(j=0;j<g;++j){k=h[j];console.log("going to try to prefetch url: ",k);$.prefetchCachedScript(k);console.log("request sent")}$("<div style='display:none'><img src='/images/bubble-top-left.png'/><img src='/images/bubble-top-right.png'/><img src='/images/bubble-bottom-left.png'/><img src='/images/bubble-bottom-right.png'/><img src='/images/bubble-left.png'/><img src='/images/bubble-right.png'/><img src='/images/bubble-top.png'/><img src='/images/bubble-bottom.png'/><img src='/images/close-button.png'/><img src='/images/bubble-arrow-point-right.png'/><img src='/images/bubble-arrow-point-left.png'/><img src='/images/bubble-arrow-point-up.png'/><img src='/images/bubble-arrow-point-down.png'/></div>").appendTo("head")}};var errorMsg="Sandbox is not defined.  Timeline module will not be loaded.";if(!Sandbox){console.error(errorMsg);throw {name:"NoSandboxError",message:errorMsg}}if(!Sandbox.modules){Sandbox.modules={}}Sandbox.modules.timeline_view=function(f){var h="#my-timeline",g="events.json",c="",k=new Date(),d=k,i=Object.prototype.hasOwnProperty,o=false,n=function(q){var r=Timeline.ClassicTheme.create(),p=q||{};r.autoWidth=false;r.autoWidthMargin=10;r.event.bubble.width=220;r.event.bubble.height=120;r.ether.backgroundColors=["#E6E6E6","#F7F7F7"];r.timeline_start=p.startProj||k;r.timeline_stop=p.endProj||d;r.event.instant.icon="no-image-40.png";r.event.instant.iconWidth=40;r.event.instant.iconHeight=40;return r},m=function(p){return p&&p.indexOf("://")>0},l=function(p){return p&&p.substr(0,p.indexOf("/",p.indexOf("://")+3))},b=function(p){if(!p){return}if(!m(p)){var r=b(document.location.href);if(p.substr(0,1)=="/"){p=l(r)+p}else{p=r+p}}var q=p.lastIndexOf("/");if(q<0){return""}else{return p.substr(0,q+1)}},e=function(p,q){if(p==null||p==""||m(p)){return p}else{if(p.substr(0,1)=="/"){return l(q)+p}else{return q+p}}},j=function(r,p){var q;r.applyToBands(function(){if(!q){q=this.getEventSource().getEvent(p);return}});if(!q){console.error("Unable to find an event for ID ",p," so cannot center timeline around event specified.");return}return q};centerOnDate=function(q,p){q.getBand(0).setCenterVisibleDate(SimileAjax.DateTime.parseGregorianDateTime(p));return false},centerOnEvent=function(r,p){var q;q=j(r,p);r.applyToBands(function(){this.setCenterVisibleDate(q.getStart())},true)},a=function a(u){var t=u,w={},s,p=0,r=function(x){var y=+x._obj.typeIndex;if(typeof y!="number"){return true}return !w[y]},v=function(x){return(s===x.getID())?p++:-1},q=function(){t.applyToBands(function(){this.getEventPainter().paint()})};t.applyToBands(function(){var x=this.getEventPainter();x.setFilterMatcher(r);x.setHighlightMatcher(v)});return{show:function(x){w[x]=false;q()},hide:function(x){w[x]=true;q()},highlight:function(x){s=x;q()},unhighlight:function(x){if(x===s){s=null}q()}}},enhanceTimelineLibrary=function(){Timeline.EventUtils=$.extend(Timeline.EventUtils,(function(){var p=f.createCounter();return{getNewEventID:function(){var q="e"+p.nextInt()+"_"+new Date().getTime();console.log("assigning eventID: ",q);return q},counterInit:function(q){console.log("initializing counter to: ",q);p.init(q)}}})());Timeline.CompactEventPainter.prototype._paintEventIcon=function(x,q,z,s,y,t){var p=this._timeline.getDocument().createElement("div"),r,v,w,u;p.className="timeline-event-icon"+("className" in q?(" "+q.className):"");p.style.left=s+"px";p.style.top=z+"px";r=q.url;w=r.lastIndexOf("/");u=r.lastIndexOf(".");v=r.substring(w+1,u);console.log("spriteClass: ",v);p.className+=" sprite-"+v;if("tooltip" in x&&typeof x.tooltip=="string"){p.title=x.tooltip}this._eventLayer.appendChild(p);return{left:s,top:z,width:y.iconWidth,height:y.iconHeight,elmt:p}};Timeline.DefaultEventSource.prototype._getBaseURL=b;Timeline.DefaultEventSource.prototype._resolveRelativeURL=e;Timeline.DefaultEventSource.Event.prototype.fillDescription=function(p){p.innerHTML=(this._description||"").replace(/\\n/g,"<br/>")};Timeline.OriginalEventPainter.prototype._getHighlightColor=function(p,r){var q=r.event.highlightColors;return q[p%(q.length-1)]};Timeline._Band.prototype.addDecorator=function(p){if(!p){console.error("Attempted to add invalid decorator.");return}this._decorators.push(p);p.initialize(this,this._timeline)};Timeline._Impl.prototype.loadJSON=function(s,t){var q=this;var r=function(v,w,u){try{t(v,s)}finally{q.hideLoadingMessage()}};var p=function(u,w,v){console.error("Failed to load json data from ",s,"\n",w);q.hideLoadingMessage()};this.showLoadingMessage();$.ajax({url:s,dataType:"json",success:r,error:p})};Timeline._Impl.prototype.applyToBands=function(w,u){var t=this.getBandCount(),s,q,v,p,r={};if(typeof w!=="function"){console.error("Method not supplied or is not a function, so there is nothing to apply to the bands.");return}if(u){q=this._bandInfos;for(p=0;p<t;++p){v=q[p].syncWith;if(typeof v==="number"){r[p]=true}}}for(p=0;p<t;++p){if(!r[p]){console.log("Applying method to band: ",p);w.apply(this.getBand(p))}else{console.log("Skipping applying method to band",p," cuz it's synched with another band; don't need to apply to EVERY band.");console.trace()}}}},createEventInfoUpdater=function(s){var p=["#diagnosisDetailsTemplate","#surgeryDetailsTemplate","#chemoDetailsTemplate","#radiationDetailsTemplate","#immunoDetailsTemplate","#testDetailsTemplate"],t=$(s).get(),q=function(w){var v,u;console.log("addEvents called!");if(!w){console.error("addEvents called, but with invalid events argument: ",w);return}for(v=0,u=w.length;v<u;++v){r(w[v])}console.log("done adding events.")},r=function(v){var w,u;console.log("adding event: ",v);w=v.getProperty("typeIndex");u=p[w]||"#notImplementedTemplate";console.log("applying template: ",u," to event: ",v," and appending it to container: ",t[w]);$(u).tmpl($.extend(v,{getDebugJSON:function(x){return(x!==undefined)?JSON.stringify(x):JSON.stringify(this)},getProperty:function(y){var x=this._obj.typeDetails,z=x&&x[y];if(y==="result"){z=this.formatResult(z)}else{if(typeof z==="boolean"){z=z?"YES":"NO"}else{if(z==="true"){z="YES"}else{if(z==="false"){z="NO"}}}}return z},hasProperty:function(y){var x=this._obj.typeDetails;return x&&i.call(x,y)},formatResult:function(x){switch(x){case"CR":x="Remission - no sign of cancer after the treatment";break;case"PR1":x="Some spots got smaller, others stayed the same";break;case"PR2":x="Some spots got smaller, but others got bigger";break;case"SD":x="All spots stayed the same or got worse";break;case"PD":x="No Change";break;case"DK":x="Not sure";break;case"ALL":x="All of the cancer was removed.";break;case"SOME":x="Some of the cancer was removed.";break;case"NONE":x="None of the cancer was removed.";break;default:console.warn("unknown 'result': ",x)}return x}})).appendTo(t[w])};console.log("\n\n\n eventTypeContentContainers: ",t,"\n\n\n");console.dir(t);return{addEvent:r,addEvents:q,onAddOne:q,onAddMany:q}},updateEventTypeVis=function(p){var q=$(".eventTypeContent").index($(p).parents(".eventTypeContent"));if(p&&p.value=="show"){updater.show(q)}else{updater.hide(q)}};makeVisibilityUpdater=function(q){return function p(r){var s=$(".eventTypeContent").index($(r).parents(".eventTypeContent"));if(r&&r.value=="show"){q.show(s)}else{q.hide(s)}}};f.createTimeline=function(t){var p=t||{},z,x,q=p.eventSource||c,r=p.startProj||k,u=p.endProj||d,s=p.theme||n({startProj:r,endProj:u}),y=p.bandInfos,v=p.timelineContainerID||h,w=p.eventDataURL||g;if(!o){enhanceTimelineLibrary();o=true}y[0].theme=y[1].theme=s;z=Timeline.create($(v)[0],y);return z};f.getDefaultTheme=n;f.isAbsoluteURL=m;f.getDomain=l;f.centerOnDate=centerOnDate;f.centerOnEvent=centerOnEvent;f.makeUpdater=a;f.createEventInfoUpdater=createEventInfoUpdater;f.makeVisibilityUpdater=makeVisibilityUpdater;f.updateEventTypeVis=updateEventTypeVis};var errorMsg="Sandbox is not defined.  Timeline module will not be loaded.";if(!Sandbox){console.error(errorMsg);throw {name:"NoSandboxError",message:errorMsg}}if(!Sandbox.modules){Sandbox.modules={}}Sandbox.modules.chapter_viewer=function(d){var i="chapter-index-",c=(function(){var k=d.createCounter();return{getNewChapterID:function(){var l="c"+k.nextInt()+"_"+new Date().getTime();console.log("assigning chapterID: ",l);return l},counterInit:function(l){console.log("initializing counter to: ",l);k.init(l)}}})(),f=function f(k,l){console.log("\n\n\nchapters: ",k,"\n\n\n");try{$("#addChapterTabTemplate").tmpl({chapters:k,offset:l,clip:d.clipText}).appendTo("#patientNotesNav");$("#addChapterTextTemplate").tmpl({chapters:k,offset:l}).appendTo("#patientNotes ul")}catch(m){console.error(m)}},b=function(l){return function k(o){var n="highlightedChapter",p,m;m=l.data(n)||{};console.log("$highlightedChapter = ",m);p=$(o.target).data("chapterIndex");console.log("chapterIndex = ",p);if(m.length>0){m.addClass("hidden")}m=$(".ui-state-highlight."+i+p);m.removeClass("hidden");l.data(n,m)}},h=function(l,k,m){if(l){l.addDecorator(new Timeline.SpanHighlightDecorator({startDate:k.start,endDate:k.end,cssClass:"ui-state-highlight hidden "+m,opacity:30}))}},e=function(m,n){var l=new Date((new Date(m.start).getTime()+new Date(m.end).getTime())/2),k=$(this.nextSibling);console.log("centerDate = ",l);$(this).data("centerDate",l).data("chapterIndex",n).data("chapterID",m.id).button()},a=function a(l){return function k(q,n,p,o){var r=n?n.getBand(0):null,m=q.chapters,p=p||0;if(!o){f(m,p)}$("#patientNotesNav input:radio").slice(p).each(function(t,v){var s=m[t],u=t+p,w=i+u;e.call(this,s,u);h(r,s,w)});if(n){n.paint()}g(l,n);console.log("done loading chapters")}},g=function(m,o){var l=b(m),k=function(){var p,q;q=$(this);p=$(this).data("centerDate");console.log("centering on date...",p);d.centerOnDate(o,p);$("#patientNotes .chapter").hide();$("#"+this.id+"_text").show()},n=function(p){console.log("inside onClickHandler, this: ",this);k.call(this,p);l.call(this,p)};m.on("click","input:radio",n).find("input:radio").first().click()},j=function j(k){return{addChapters:a(k)}};$.extend(d,{ChaptersUtil:c,renderChapters:f,makeChaptersUpdater:j})};Sandbox.modules.dao=function(h){var d=(function(){var k=function(l){return function(){console.log(l,"(",arguments,")")}},i=function(){for(method in d){if(d.hasOwnProperty(method)){d[method]()}}},j=function(l){var m={};$.each(l,function(o,n){m[n]=k(n)});m.testDummyDAO=i;return m};return j(["updateEvent","addEvent","deleteEvent","loadEvent"])})(),c={loadData:(function(){var i={events:"#eventsToLoad",chapters:"#chaptersToLoad",doctors:"#doctorAutocompleteData",hospitals:"#hospitalAutocompleteData",locations:"#locationAutocompleteData",chemos:"#chemoAutocompleteData"};return function(j){var k=$(i[j]),l;if(k.length>0){l=JSON.parse(k.text())}if(!l){console.log("No data loaded for: ",j)}return l}})()},e=function(l){var k,j,m;return l},b=function(n){var m,l,j,k,o;l=n&&n.length;for(m=0;m<l;++m){j=n[m];if(j.type==="DIAGNOSIS"){k=j.typeDetails;if(k){o=k.diseaseSites;if(o){k.diseaseSites=o.split(":")}}}}return n},a=(function(){var y=b(e(c.loadData("events"))),p=c.loadData("chapters"),v=c.loadData("doctors"),w=c.loadData("hospitals"),q=c.loadData("locations"),i=c.loadData("chemos"),j=[{title:"Help",start:"January 4, 2013",end:"January 17, 2013",typeIndex:-1,type:"CHAPTER",typeDetails:{text:"This is where 'chapters' of your story show up.  Click the 'Add Chapter' button to start telling your story."}}],o=function(A,z){console.log("textStatus = ",A);if(z){console.dir("jqXHR = ",z)}},t=function(A,B,z){console.log("Successfully posted event to server.");o(B);console.log("data = ",A)},k=function(z,B,A){console.log("Error: '",A,"'; request failed.");o(B,z)},n=function(z,A,B){A=A||t;B=B||k;$.ajax(z,{type:"POST",headers:{"x-post-override":"DELETE"},success:A,error:B})},l=function(B){var A,z;console.log("addEvents called!");if(!B){console.error("addEvents called, but with invalid events argument: ",B);return}for(A=0,z=B.length;A<z;++A){m(B[A])}console.log("done adding events.")},m=function(A){var C,B,z;console.log("dao is adding the event: ",A);C=A._obj;C.id=A.getID();B=C.typeDetails;if(C.type==="DIAGNOSIS"&&B){z=B.diseaseSites;if(z){B.diseaseSites=z.join(":")}}console.log("sending reformatted event: ",C,"... ");$.ajax("/myStory/events/",{type:"POST",contentType:"application/json",data:JSON.stringify(C),dataType:"json",success:t,error:k});console.log("request sent.")},r=function(z){console.log("dao is deleting eventID: ",z);n("/myStory/events/"+z);console.log("request sent.")},x=function(z){console.log("dao is adding chapter: ",z);$.ajax("/myStory/events/",{type:"POST",contentType:"application/json",data:JSON.stringify(z),dataType:"json",success:t,error:k});console.log("request sent.")},s=function(z){console.log("dao is deleting chapterID: ",z);n("/myStory/chapters/"+z);console.log("request sent.")},u=function(){console.log("setting up autocomplete for doctor fields.");$(".doctor").autocomplete({source:v});console.log("setting up autocomplete for hospital fields.");$(".hospital").autocomplete({source:w});console.log("setting up autocomplete for location fields.");$(".location").autocomplete({source:q});console.log("setting up autocomplete for chemo fields.");$(".chemoProtocol").autocomplete({source:i})};console.log("events loaded: ",y);console.log("chapters loaded: ",p);if(p.length<=0){p=j}console.log("since no chapters were loaded, I set it to HELP_CHAPTER_JSON; chapters = ",p);console.log("doctors loaded: ",v);console.log("hospitals loaded: ",w);console.log("locations loaded: ",q);console.log("chemos loaded: ",i);return{addEvent:m,addEvents:l,onAddOne:l,onAddMany:l,deleteEvent:r,addChapter:x,deleteChapter:s,getEvents:function(){return{dateTimeFormat:"Gregorian",events:y}},getChapters:function(){return{chapters:p}},initAutoCompletes:u,deleteMyAccount:function(){if(confirm("Are you sure you want to delete your account?\nWe cannot undo this later.")){n("/myAccount",function z(){alert("Your account has been deleted.  You will now be forwarded to the demo page.");location.href="/demo"},function A(){alert("I'm sorry, but I was unable to delete your account at this time.");k()})}}}})(),f=(document.location.protocol!="file:"),g=a;h.getDAO=function(){return g}};Sandbox(["common","timeline_view","chapter_viewer","dao"],function(g){var a,f,d=new Timeline.CancerEventSource(),h="json/demo_events_images_prefixes.json",c="json/demo_chapters.json",e=function(){var i=SimileAjax.DateTime.parseGregorianDateTime("Sep 1 1898 00:08:00 GMT-0600"),n=SimileAjax.DateTime.parseGregorianDateTime("Nov 27 2112 00:00:00 GMT-0600"),m=g.getDefaultTheme(i,n),k=Timeline.CompactEventPainter,l={iconLabelGap:5,labelRightMargin:20,iconWidth:40,iconHeight:40,stackConcurrentPreciseInstantEvents:{limit:5,moreMessageTemplate:"%0 More Events",icon:"no-image-40.png",iconWidth:40,iconHeight:40}},j=[Timeline.createBandInfo({eventSource:d,eventPainter:k,eventPainterParams:l,date:"Nov 28 2006 00:00:00 GMT-0600",width:"85%",intervalUnit:Timeline.DateTime.MONTH,intervalPixels:100,theme:m}),Timeline.createBandInfo({eventSource:d,layout:"overview",date:"Nov 28 2006 00:00:00 GMT-0600",width:"15%",intervalUnit:Timeline.DateTime.YEAR,intervalPixels:200,theme:m})];j[1].syncWith=0;j[1].highlight=true;j[1].decorators=[new Timeline.SpanHighlightDecorator({startDate:i,endDate:n,inFront:false,color:"#FFC080",opacity:30,theme:m})];a=g.createTimeline({bandInfos:j,eventSource:d,startProj:i,endProj:n,eventDataURL:h});f=g.makeUpdater(a)},b=function(j){var i;j.preventDefault();i=this.href||"";if(i.indexOf("/")>=0){i=i.substring(i.lastIndexOf("/")+1)}g.centerOnEvent(a,i);f.highlight(i)};$(function(){var i=g.getDAO();g.initThemer();$(".tabs").tabs();d.addListener(g.createEventInfoUpdater(".eventTypeContent ul"));$("#eventInfoBox").on("click",".eventTitle a",b);$("#eventInfoTabs input:radio").button().click(function(){g.updateEventTypeVis(this)});e();$.when(i.getEvents()).then(function(k){var j;console.log("events data loaded: ",k);$(window).resize(g.getResizer(a));d.loadJSON(k,"/");try{j=k.events.length}catch(l){console.warn("attempting to access data.events.length caused exception; setting numChapters to 0");j=0}Timeline.EventUtils.counterInit(j);a.layout();d.addListener(i)});$.when(i.getChapters()).then(function(j){var l;console.log("chapters data loaded: ",j);chaptersUpdater=g.makeChaptersUpdater($("#patientNotesNav")),chaptersUpdater.addChapters(j,a);try{l=j.chapters.length}catch(k){console.warn("attempting to access data.chapters.length caused exception; setting numChapters to 0");l=0}g.ChaptersUtil.counterInit(l)});g.setupDialogs({autoOpen:false,width:550,resizable:false});g.doPreFetch();$("#deleteAccountButton").on("click",i.deleteMyAccount)})});(function(){if(window.isUIDisabled){console.log("UI is disabled.");$("body").off("click",disableUI);console.log("UI is now enabled.")}else{console.log("UI is not disabled.")}})();